<rewriter xmlns="http://marklogic.com/xdmp/rewriter">
  <match-path any-of="/">
    <dispatch>/index.html</dispatch>
  </match-path>

  <match-path prefix="/css/">
    <dispatch>$0</dispatch>
  </match-path>

  <match-path prefix="/js/">
    <dispatch>$0</dispatch>
  </match-path>

  <match-path any-of="/map">
    <dispatch>/map.xqy</dispatch>
  </match-path>

  <match-path matches="^/map/([^/]+)/([^/]+)(/boundaries(/debug)?)?$">
    <add-query-param name="lat">$1</add-query-param>
    <add-query-param name="lon">$2</add-query-param>
    <add-query-param name="bounds">$3</add-query-param>
    <add-query-param name="debugbounds">$4</add-query-param>
    <dispatch>/map.xqy</dispatch>
  </match-path>

  <match-path any-of="/timezone">
    <dispatch>/timezone.xqy</dispatch>
  </match-path>

  <match-path any-of="/api/timezone">
    <dispatch>/api/timezone.xqy</dispatch>
  </match-path>

  <match-path any-of="/api/timezone-details">
    <dispatch>/api/timezone-details.xqy</dispatch>
  </match-path>

</rewriter>
